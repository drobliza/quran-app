<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø­Ø³Ø¨ Ø­Ø§Ù„ØªÙƒ</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:"Amiri","Scheherazade New","Cairo",serif;
  background:linear-gradient(#f2fff7,#ffffff);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.app{
  background:white;
  width:90%;
  max-width:450px;
  padding:20px;
  border-radius:20px;
  box-shadow:0 0 15px rgba(0,0,0,0.1);
  text-align:center;
}
h1{color:#2e7d32;}
select,input{padding:6px;border-radius:8px;font-family:Amiri;margin-bottom:5px;}
.moods{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;}
.moods button{padding:12px;border:none;border-radius:12px;background:#e8f5e9;}
.result{display:none;margin-top:10px;}
.ayah-box{padding:15px;border-radius:16px;box-shadow:0 0 10px rgba(46,125,50,.2);}
#ayah{
  font-size:22px;
  line-height:1.9;
  opacity:0;
  transform:scale(.95);
  background:linear-gradient(90deg,#1b5e20,#43a047,#1b5e20);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:appear 1s forwards,grad 6s infinite;
}
@keyframes appear{to{opacity:1;transform:scale(1);}}
@keyframes grad{0%{background-position:0%}50%{background-position:100%}100%{background-position:0%}}
.controls button{margin:4px;padding:6px 10px;border:none;border-radius:10px;background:#2e7d32;color:white;}
#tafsir{font-size:14px;background:#f9f9f9;padding:8px;border-radius:8px;margin-top:6px;}
</style>
</head>
<body>

<div class="app">
<h1>ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù† Ù„Ùƒ</h1>

<select id="reciterSelect" onchange="changeReciter()">
<option value="ar.alafasy">Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ</option>
<option value="ar.abdulbasitmurattal">Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø·</option>
<option value="ar.husary">Ø§Ù„Ø­ØµØ±ÙŠ</option>
<option value="ar.minshawi">Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ</option>
<option value="ar.sudais">Ø§Ù„Ø³Ø¯ÙŠØ³</option>
<option value="ar.mahermuaiqly">Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ</option>
</select>

<div>
<select id="surahSelect"></select>
<input type="number" id="ayahInput" placeholder="Ø¢ÙŠØ©" min="1" style="width:70px;">
<button onclick="loadCustomAyah()">Ø§Ø°Ù‡Ø¨</button>
<button onclick="playFullSurah()">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©</button>
</div>

<h3>ÙƒÙŠÙ ØªØ´Ø¹Ø± Ø§Ù„ÙŠÙˆÙ…ØŸ</h3>
<div class="moods" id="moods">
<button onclick="chooseMood('sad')">ğŸ˜” Ø­Ø²ÙŠÙ†</button>
<button onclick="chooseMood('fear')">ğŸ˜Ÿ Ù‚Ù„Ù‚</button>
<button onclick="chooseMood('angry')">ğŸ˜¡ ØºØ§Ø¶Ø¨</button>
<button onclick="chooseMood('dua')">ğŸ™ Ø¯Ø¹Ø§Ø¡</button>
<button onclick="chooseMood('repent')">ğŸŒ± ØªÙˆØ¨Ø©</button>
<button onclick="chooseMood('patience')">ğŸ’ª ØµØ¨Ø±</button>
<button onclick="chooseMood('hope')">ğŸŒŸ Ø£Ù…Ù„</button>
</div>

<div class="result" id="result">
<div class="ayah-box">
<div id="ayah"></div>
</div>
<div id="meaning"></div>
<div id="tafsir"></div>
<div class="controls">
<button onclick="newAyah()">Ø¢ÙŠØ© Ø£Ø®Ø±Ù‰</button>
<button onclick="playAudio()">Ø§Ø³ØªÙ…Ø§Ø¹</button>
<button onclick="goBack()">Ø±Ø¬ÙˆØ¹</button>
</div>
<audio id="audio"></audio>
</div>
</div>

<script>
const surahs=[ "Ø§Ù„ÙØ§ØªØ­Ø©","Ø§Ù„Ø¨Ù‚Ø±Ø©","Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†","Ø§Ù„Ù†Ø³Ø§Ø¡","Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©","Ø§Ù„Ø£Ù†Ø¹Ø§Ù…","Ø§Ù„Ø£Ø¹Ø±Ø§Ù","Ø§Ù„Ø£Ù†ÙØ§Ù„","Ø§Ù„ØªÙˆØ¨Ø©","ÙŠÙˆÙ†Ø³","Ù‡ÙˆØ¯","ÙŠÙˆØ³Ù","Ø§Ù„Ø±Ø¹Ø¯","Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…","Ø§Ù„Ø­Ø¬Ø±","Ø§Ù„Ù†Ø­Ù„","Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡","Ø§Ù„ÙƒÙ‡Ù","Ù…Ø±ÙŠÙ…","Ø·Ù‡","Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡","Ø§Ù„Ø­Ø¬","Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†","Ø§Ù„Ù†ÙˆØ±","Ø§Ù„ÙØ±Ù‚Ø§Ù†","Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡","Ø§Ù„Ù†Ù…Ù„","Ø§Ù„Ù‚ØµØµ","Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª","Ø§Ù„Ø±ÙˆÙ…","Ù„Ù‚Ù…Ø§Ù†","Ø§Ù„Ø³Ø¬Ø¯Ø©","Ø§Ù„Ø£Ø­Ø²Ø§Ø¨","Ø³Ø¨Ø£","ÙØ§Ø·Ø±","ÙŠØ³","Ø§Ù„ØµØ§ÙØ§Øª","Øµ","Ø§Ù„Ø²Ù…Ø±","ØºØ§ÙØ±","ÙØµÙ„Øª","Ø§Ù„Ø´ÙˆØ±Ù‰","Ø§Ù„Ø²Ø®Ø±Ù","Ø§Ù„Ø¯Ø®Ø§Ù†","Ø§Ù„Ø¬Ø§Ø«ÙŠØ©","Ø§Ù„Ø£Ø­Ù‚Ø§Ù","Ù…Ø­Ù…Ø¯","Ø§Ù„ÙØªØ­","Ø§Ù„Ø­Ø¬Ø±Ø§Øª","Ù‚","Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª","Ø§Ù„Ø·ÙˆØ±","Ø§Ù„Ù†Ø¬Ù…","Ø§Ù„Ù‚Ù…Ø±","Ø§Ù„Ø±Ø­Ù…Ù†","Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©","Ø§Ù„Ø­Ø¯ÙŠØ¯","Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©","Ø§Ù„Ø­Ø´Ø±","Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©","Ø§Ù„ØµÙ","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†","Ø§Ù„ØªØºØ§Ø¨Ù†","Ø§Ù„Ø·Ù„Ø§Ù‚","Ø§Ù„ØªØ­Ø±ÙŠÙ…","Ø§Ù„Ù…Ù„Ùƒ","Ø§Ù„Ù‚Ù„Ù…","Ø§Ù„Ø­Ø§Ù‚Ø©","Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬","Ù†ÙˆØ­","Ø§Ù„Ø¬Ù†","Ø§Ù„Ù…Ø²Ù…Ù„","Ø§Ù„Ù…Ø¯Ø«Ø±","Ø§Ù„Ù‚ÙŠØ§Ù…Ø©","Ø§Ù„Ø¥Ù†Ø³Ø§Ù†","Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª","Ø§Ù„Ù†Ø¨Ø£","Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª","Ø¹Ø¨Ø³","Ø§Ù„ØªÙƒÙˆÙŠØ±","Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±","Ø§Ù„Ù…Ø·ÙÙÙŠÙ†","Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚","Ø§Ù„Ø¨Ø±ÙˆØ¬","Ø§Ù„Ø·Ø§Ø±Ù‚","Ø§Ù„Ø£Ø¹Ù„Ù‰","Ø§Ù„ØºØ§Ø´ÙŠØ©","Ø§Ù„ÙØ¬Ø±","Ø§Ù„Ø¨Ù„Ø¯","Ø§Ù„Ø´Ù…Ø³","Ø§Ù„Ù„ÙŠÙ„","Ø§Ù„Ø¶Ø­Ù‰","Ø§Ù„Ø´Ø±Ø­","Ø§Ù„ØªÙŠÙ†","Ø§Ù„Ø¹Ù„Ù‚","Ø§Ù„Ù‚Ø¯Ø±","Ø§Ù„Ø¨ÙŠÙ†Ø©","Ø§Ù„Ø²Ù„Ø²Ù„Ø©","Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª","Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©","Ø§Ù„ØªÙƒØ§Ø«Ø±","Ø§Ù„Ø¹ØµØ±","Ø§Ù„Ù‡Ù…Ø²Ø©","Ø§Ù„ÙÙŠÙ„","Ù‚Ø±ÙŠØ´","Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†","Ø§Ù„ÙƒÙˆØ«Ø±","Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†","Ø§Ù„Ù†ØµØ±","Ø§Ù„Ù…Ø³Ø¯","Ø§Ù„Ø¥Ø®Ù„Ø§Øµ","Ø§Ù„ÙÙ„Ù‚","Ø§Ù„Ù†Ø§Ø³" ];

surahs.forEach((s,i)=>{
 let o=document.createElement("option");
 o.value=i+1; o.textContent=(i+1)+" - "+s;
 surahSelect.appendChild(o);
});

let currentReciter="ar.alafasy";
let currentMood="";
let lastSurah=1,lastAyah=1;

const moods={sad:[[2,286],[93,3]],fear:[[3,173]],angry:[[41,34]],dua:[[1,60]],repent:[[39,53]],patience:[[2,153]],hope:[[94,6]]};

async function getAyah(s,a){
 const url=`https://api.alquran.cloud/v1/ayah/${s}:${a}/${currentReciter}`;
 const res=await fetch(url);
 const data=await res.json();
 typeAyah("ï´¿ "+data.data.text+" ï´¾");
 meaning.innerText=data.data.surah.name+" - Ø¢ÙŠØ© "+data.data.numberInSurah;
 audio.src=data.data.audio;
 lastSurah=s; lastAyah=a;
 loadTafsir(s,a);
}

async function loadTafsir(s,a){
 const url=`https://api.alquran.cloud/v1/ayah/${s}:${a}/ar.muyassar`;
 const res=await fetch(url);
 const data=await res.json();
 tafsir.innerText="ğŸ“˜ Ø§Ù„ØªÙØ³ÙŠØ±: "+data.data.text;
}

function typeAyah(t){
 ayah.textContent="";
 ayah.style.animation="none"; void ayah.offsetWidth; ayah.style.animation=null;
 let i=0;
 const it=setInterval(()=>{ayah.textContent+=t[i++]; if(i>=t.length)clearInterval(it)},30);
}

function loadCustomAyah(){
 getAyah(surahSelect.value,ayahInput.value);
 result.style.display="block"; moodsDiv.style.display="none";
}

function chooseMood(m){
 currentMood=m;
 const pick=moods[m][0];
 getAyah(pick[0],pick[1]);
 result.style.display="block"; moodsDiv.style.display="none";
}

function newAyah(){
 const list=moods[currentMood];
 const r=list[Math.floor(Math.random()*list.length)];
 getAyah(r[0],r[1]);
}

function playAudio(){audio.play();}
function changeReciter(){getAyah(lastSurah,lastAyah);}
function goBack(){result.style.display="none"; moodsDiv.style.display="grid";}

async function playFullSurah(){
 const s=surahSelect.value;
 const res=await fetch(`https://api.alquran.cloud/v1/surah/${s}/${currentReciter}`);
 const data=await res.json();
 let i=0;
 function playNext(){
   if(i>=data.data.ayahs.length) return;
   audio.src=data.data.ayahs[i].audio;
   typeAyah("ï´¿ "+data.data.ayahs[i].text+" ï´¾");
   audio.play();
   audio.onended=()=>{i++; playNext();}
 }
 playNext();
}
</script>
</body>
</html>
