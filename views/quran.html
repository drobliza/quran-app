<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø­Ø³Ø¨ Ø­Ø§Ù„ØªÙƒ - ÙÙ‚Ø§Ø¹Ø§Øª</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:"Amiri","Scheherazade New","Cairo",serif;
  background:linear-gradient(#f2fff7,#ffffff);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
  transition: background 1s;
  position: relative;
}
body.dim{background:linear-gradient(#0f1f14,#000);}
#canvas-bubbles{
  position:fixed;
  top:0; left:0;
  width:100%;
  height:100%;
  z-index:0;
}
.app{
  background:white;
  width:90%;
  max-width:400px;
  padding:20px;
  border-radius:20px;
  box-shadow:0 0 15px rgba(0,0,0,0.1);
  text-align:center;
  z-index:1;
}
h1{color:#2e7d32;}
.moods{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
}
.moods button{
  padding:12px;
  border:none;
  border-radius:12px;
  background:#e8f5e9;
  font-size:16px;
  cursor:pointer;
  transition: all 0.3s;
}
.moods button:hover{
  background:#c8e6c9;
  transform: scale(1.05);
}
.result{display:none;margin-top:15px;}
.ayah-box{
  position:relative;
  padding:15px;
  border-radius:16px;
  margin-bottom:10px;
  overflow:hidden;
  box-shadow:0 0 8px rgba(46,125,50,0.2),0 0 20px rgba(46,125,50,0.15);
}
#ayah{
  font-size:24px;
  line-height:1.9;
  white-space: pre-wrap;
  text-align:center;
  margin-bottom:5px;
  direction: rtl;
  unicode-bidi: plaintext;
}
.meaning,.action{font-size:14px;margin-bottom:8px;}
.controls button{
  margin:5px;
  padding:8px 12px;
  border:none;
  border-radius:10px;
  background:#2e7d32;
  color:white;
  cursor:pointer;
}
.ayah-box.listening{box-shadow:0 0 25px rgba(67,160,71,0.6);}
</style>
</head>
<body>

<a href="/logout" style="position:fixed;top:10px;left:10px;background:#2e7d32;color:white;padding:8px 12px;border-radius:8px;text-decoration:none;">
ğŸšª Ø®Ø±ÙˆØ¬
</a>

<canvas id="canvas-bubbles"></canvas>

<div class="app">
<h1>ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù† Ù„Ùƒ</h1>

<select id="reciterSelect" onchange="changeReciter()" style="margin-bottom:10px;padding:8px;border-radius:10px;font-family:Amiri;">
  <option value="ar.alafasy">ğŸ™ï¸ Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ</option>
  <option value="ar.abdulbasitmurattal">ğŸ™ï¸ Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø·</option>
  <option value="ar.husary">ğŸ™ï¸ Ø§Ù„Ø­ØµØ±ÙŠ</option>
  <option value="ar.minshawi">ğŸ™ï¸ Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ</option>
  <option value="ar.sudais">ğŸ™ï¸ Ø§Ù„Ø³Ø¯ÙŠØ³</option>
  <option value="ar.mahermuaiqly">ğŸ™ï¸ Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ</option>
</select>

<h2>ÙƒÙŠÙ ØªØ´Ø¹Ø± Ø§Ù„ÙŠÙˆÙ…ØŸ</h2>

<div class="moods" id="moods">
<button onclick="chooseMood('sad')">ğŸ˜” Ø­Ø²ÙŠÙ†</button>
<button onclick="chooseMood('fear')">ğŸ˜Ÿ Ù‚Ù„Ù‚</button>
<button onclick="chooseMood('angry')">ğŸ˜¡ ØºØ§Ø¶Ø¨</button>
<button onclick="chooseMood('dua')">ğŸ™ Ø¯Ø¹Ø§Ø¡</button>
<button onclick="chooseMood('repent')">ğŸŒ± ØªÙˆØ¨Ø©</button>
<button onclick="chooseMood('patience')">ğŸ’ª ØµØ¨Ø±</button>
<button onclick="chooseMood('hope')">ğŸŒŸ Ø£Ù…Ù„</button>
</div>

<div class="result" id="result">
<div class="ayah-box" id="ayahBox">
  <div id="ayah"></div>
</div>
<div class="meaning" id="meaning"></div>
<div class="action" id="action"></div>
<div class="controls">
<button onclick="newAyah()">ğŸ”„ Ø¢ÙŠØ© Ø£Ø®Ø±Ù‰</button>
<button onclick="playAudio()">ğŸ§ Ø§Ø³ØªÙ…Ø§Ø¹</button>
<button onclick="goBack()">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
</div>
<audio id="audio"></audio>
</div>
</div>

<script>
let currentReciter = "ar.alafasy";

const moods = {
  sad:[2,286,153,87,255,18,39,42],
  fear:[3,173,40,129,45,9],
  angry:[5,134,37,200,16,60],
  dua:[1,60,186,55,100,101],
  repent:[53,222,8,110,25,32,50],
  patience:[155,200,10,94,110],
  hope:[13,19,24,37,57,90]
};

let currentMood="";
let lastAyah=null;

async function getAyah(num){
  const url="https://api.alquran.cloud/v1/ayah/"+num+"/"+currentReciter;
  const res=await fetch(url);
  const data=await res.json();
  document.getElementById("ayah").innerText="ï´¿ "+data.data.text+" ï´¾";
  document.getElementById("meaning").innerText="ğŸ“– "+data.data.surah.name+" - Ø¢ÙŠØ© "+data.data.numberInSurah;
  document.getElementById("audio").src=data.data.audio;
  lastAyah=num;
}

function changeReciter(){
  currentReciter=document.getElementById("reciterSelect").value;
  if(lastAyah) getAyah(lastAyah);
}

function chooseMood(mood){
  currentMood=mood;
  document.getElementById("moods").style.display="none";
  document.getElementById("result").style.display="block";
  newAyah();
}

function newAyah(){
  const list=moods[currentMood];
  const randomIndex=Math.floor(Math.random()*list.length);
  getAyah(list[randomIndex]);
}

function goBack(){
  document.getElementById("result").style.display="none";
  document.getElementById("moods").style.display="grid";
}

function playAudio(){
  document.getElementById("audio").play();
}
</script>
</body>
</html>
